{"ast":null,"code":"import _classCallCheck from \"/Users/wangweicheng/Dropbox/My Mac (\\u738B\\u4F1F\\u7A0B\\u7684MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wangweicheng/Dropbox/My Mac (\\u738B\\u4F1F\\u7A0B\\u7684MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/wangweicheng/Dropbox/My Mac (\\u738B\\u4F1F\\u7A0B\\u7684MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/wangweicheng/Dropbox/My Mac (\\u738B\\u4F1F\\u7A0B\\u7684MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wangweicheng/Dropbox/My Mac (\\u738B\\u4F1F\\u7A0B\\u7684MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/wangweicheng/Dropbox/My Mac (\\u738B\\u4F1F\\u7A0B\\u7684MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/src/components/PreferenceSpace.js\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport ConvexHull from \"./ConvexHull\";\nimport Legend from \"./Legend\";\n\n// to visualize the preference space.\nvar PreferenceSpace = /*#__PURE__*/function (_React$Component) {\n  _inherits(PreferenceSpace, _React$Component);\n  var _super = _createSuper(PreferenceSpace);\n  function PreferenceSpace(props) {\n    var _this;\n    _classCallCheck(this, PreferenceSpace);\n    _this = _super.call(this, props);\n    _this.updateContextHullVertices = function (index) {\n      var convexHullVertices = _this.props.vertices.map(function (vertext) {\n        var vert = [];\n        for (var i = 0; i < 3; ++i) {\n          vert.push(vertext[(i + index) % 4]);\n        }\n        return vert;\n      });\n      _this.setState({\n        convexHullVertices: convexHullVertices\n      });\n    };\n    _this.changeStartingIndex = function (index) {\n      _this.setState({\n        index: index\n      });\n      // explicitly pass index to this.updateContextHullVertices\n      // because this.state.index is not updated immediately,\n      // i.e., this.state.index has still the old value at this line.\n      _this.updateContextHullVertices(index);\n    };\n    _this.state = {\n      index: 0,\n      convexHullVertices: props.vertices.map(function (vert) {\n        return vert.slice(0, 3);\n      })\n    };\n    return _this;\n  }\n  _createClass(PreferenceSpace, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.vertices !== prevProps.vertices) {\n        this.updateContextHullVertices(this.state.index);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      }, \"Convex Hull of Preference Space\"), /*#__PURE__*/React.createElement(ConvexHull, {\n        vertices: this.state.convexHullVertices,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: \"2rem\",\n          left: \"20rem\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Legend, {\n        changeStartingIndex: this.changeStartingIndex,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n  return PreferenceSpace;\n}(React.Component);\nvar mapStateToProps = function mapStateToProps(_ref) {\n  var vertices = _ref.vertices;\n  return {\n    vertices: vertices\n  };\n};\nexport default connect(mapStateToProps)(PreferenceSpace);","map":{"version":3,"names":["React","connect","ConvexHull","Legend","PreferenceSpace","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","updateContextHullVertices","index","convexHullVertices","vertices","map","vertext","vert","i","push","setState","changeStartingIndex","state","slice","_createClass","key","value","componentDidUpdate","prevProps","render","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","position","top","left","Component","mapStateToProps","_ref"],"sources":["/Users/wangweicheng/Dropbox/My Mac (王伟程的MacBook Pro)/Documents/GitHub/userstudy.github.io/react-app/src/components/PreferenceSpace.js"],"sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport ConvexHull from \"./ConvexHull\";\nimport Legend from \"./Legend\";\n\n// to visualize the preference space.\nclass PreferenceSpace extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      index: 0,\n      convexHullVertices: props.vertices.map(vert => vert.slice(0, 3))\n    };\n  }\n\n  updateContextHullVertices = index => {\n    const convexHullVertices = this.props.vertices.map(vertext => {\n      const vert = [];\n      for (let i = 0; i < 3; ++i) {\n        vert.push(vertext[(i + index) % 4]);\n      }\n      return vert;\n    });\n    this.setState({ convexHullVertices });\n  };\n\n  componentDidUpdate(prevProps) {\n    if (this.props.vertices !== prevProps.vertices) {\n      this.updateContextHullVertices(this.state.index);\n    }\n  }\n\n  changeStartingIndex = index => {\n    this.setState({ index });\n    // explicitly pass index to this.updateContextHullVertices\n    // because this.state.index is not updated immediately,\n    // i.e., this.state.index has still the old value at this line.\n    this.updateContextHullVertices(index);\n  };\n\n  render() {\n    return (\n      <div>\n        <h4>Convex Hull of Preference Space</h4>\n        <ConvexHull vertices={this.state.convexHullVertices} />\n        <div style={{ position: \"absolute\", top: \"2rem\", left: \"20rem\" }}>\n          <Legend changeStartingIndex={this.changeStartingIndex} />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({ vertices }) => ({ vertices });\n\nexport default connect(mapStateToProps)(PreferenceSpace);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}